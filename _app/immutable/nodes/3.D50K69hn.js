import"../chunks/DsnmJJEf.js";import"../chunks/BJB4Ptj-.js";import{o as Ae,e as G,s as F}from"../chunks/DrQHHxrB.js";import{p as ae,f as i,d as m,a1 as I,_ as K,s as $,r as n,b as s,c as te,t as j,a as P,ag as f,A as T,l as a,ap as be,aq as H,m as we}from"../chunks/i1UHJtEQ.js";import{i as y}from"../chunks/DSE7bfqq.js";import{e as X,i as Y}from"../chunks/C7ZwHSTt.js";import{i as re}from"../chunks/BuUzJufj.js";import{a as ke}from"../chunks/Dkw99rV-.js";import{F as Se,S as xe,M as Ne}from"../chunks/ChA89cJe.js";import{s as ee}from"../chunks/CF0yLBAV.js";import{p as Me}from"../chunks/B2yB9kBp.js";var Fe=i('<div class="screenshot-container svelte-1s84j4"><img class="screenshot svelte-1s84j4"/></div>'),Te=i('<div class="body svelte-1s84j4"><!> <!></div>');function $e(z,C){ae(C,!1);let e=Me(C,"avatar",12),S=[{id:"description",type:"textarea",label:"Description",values:[e().description||"N/A"]},{id:"file",type:"text",label:"File",values:[e().fileName||"N/A"]},{id:"fileType",type:"text",label:"File Type",values:[e().fileType||"N/A"]},{id:"gender",type:"enum",label:"Gender",values:[e().gender||"N/A"],options:["Male","Female","None"]},{id:"categories",type:"tags",label:"Categories",values:e().categories||[]}];function x(p){p.forEach(o=>{switch(o.id){case"description":e(e().description=o.values[0]||"",!0);break;case"file":e(e().fileName=o.values[0]||"",!0);break;case"fileType":e(e().fileType=o.values[0]||"",!0);break;case"gender":e(e().gender=o.values[0]||"",!0);break;case"categories":e(e().categories=o.values,!0);break}}),console.log("Avatar updated:",e()),alert(`Submit is not yet implemented

JSON Data:
`+JSON.stringify(e(),null,2))}re();var d=Te(),u=m(d);{var L=p=>{var o=Fe(),B=m(o);n(o),j(()=>{ee(B,"src",(I(e()),K(()=>e().screenshot))),ee(B,"alt",(I(e()),K(()=>`[image of '${e().name||"Avatar"}' is missing]`)))}),s(p,o)};y(u,p=>{I(e()),K(()=>e().screenshot)&&p(L)})}var U=$(u,2);Se(U,{get rows(){return S},readonly:!1,onSubmit:x}),n(d),s(z,d),te()}var je=i('<div class="loading svelte-11rz51j">Loading avatars...</div>'),Ce=i('<div class="error svelte-11rz51j"> </div>'),Le=i('<div class="no-results svelte-11rz51j">No avatars found.</div>'),Be=i('<span class="tag"> </span>'),De=i('<span class="tag"> </span>'),Ee=i('<div class="categories"></div>'),Pe=i('<div class="result-card svelte-11rz51j" tabindex="0" role="button"><h3> </h3> <p> </p> <!> <!></div>'),ze=i('<div class="result-grid"><!></div>'),Ue=i("<!> <!>",1);function We(z,C){ae(C,!1);let e=T([]),S=T(!0),x=T(null),d=T(null),u=T(!1);async function L(t="",N=0,g=20){try{f(S,!0),f(x,null);const l=new URLSearchParams;t&&l.append("search",t),N&&l.append("offset",N.toString()),g&&l.append("limit",g.toString()),console.log("Fetching avatars with params:",l.toString());const r=await ke(`/avatars?${l}`);console.log("Received avatars data:",r),console.log("Type of data:",typeof r),console.log("Data structure:",Array.isArray(r)?"Array":"Object",r);const h=Array.isArray(r)?r:r.avatars||r.items||r.data||[];return console.log("Processed avatars array:",h),console.log("Number of avatars:",h.length),h}catch(l){return console.error("Error fetching avatars:",l),console.warn("Using mock data for development"),[{id:"1",name:"Athletic Male Avatar",description:"A versatile male avatar suitable for various workout demonstrations",gender:"Male",categories:["Athletic","Male","Standard"],fileName:"athletic_male.fbx",screenshot:"/api/placeholder/400/300",createdAt:"2024-01-15T10:00:00Z",createdBy:"admin"},{id:"2",name:"Athletic Female Avatar",description:"A versatile female avatar suitable for various workout demonstrations",gender:"Female",categories:["Athletic","Female","Standard"],fileName:"athletic_female.fbx",screenshot:"/api/placeholder/400/300",createdAt:"2024-01-16T10:00:00Z",createdBy:"admin"},{id:"3",name:"Beginner Male Avatar",description:"A male avatar designed for beginner-level workouts",gender:"Male",categories:["Beginner","Male"],fileName:"beginner_male.fbx",screenshot:"/api/placeholder/400/300",createdAt:"2024-01-17T10:00:00Z",createdBy:"trainer1"}].filter(r=>!t||r.name?.toLowerCase().includes(t.toLowerCase())||r.description?.toLowerCase().includes(t.toLowerCase())||r.categories?.some(h=>h.toLowerCase().includes(t.toLowerCase())))}finally{f(S,!1)}}async function U(t){console.log("Search triggered with query:",t),f(e,await L(t)),console.log("Avatars updated after search, length:",a(e).length)}function p(t){f(d,t),f(u,!0)}function o(){f(u,!1),f(d,null)}function B(t){t.key==="Escape"&&a(u)&&o()}Ae(async()=>{console.log("Component mounted, fetching initial avatars..."),f(e,await L()),console.log("Initial avatars loaded, length:",a(e).length)}),re();var Q=Ue();G("keydown",be,B);var V=P(Q);xe(V,{title:"Avatars",description:"Browse and search for avatars.",onSearch:U,children:(t,N)=>{var g=ze(),l=m(g);{var r=A=>{var D=je();s(A,D)},h=A=>{var D=H(),ie=P(D);{var le=b=>{var w=Ce(),q=m(w);n(w),j(()=>F(q,`Error: ${a(x)??""}`)),s(b,w)},ne=b=>{var w=H(),q=P(w);{var de=k=>{var E=Le();s(k,E)},ce=k=>{var E=H(),ve=P(E);X(ve,1,()=>a(e),Y,(fe,c)=>{var M=Pe(),O=m(M),me=m(O,!0);n(O);var R=$(O,2),pe=m(R,!0);n(R);var W=$(R,2);{var ge=v=>{var _=Be(),Z=m(_,!0);n(_),j(()=>F(Z,a(c).gender)),s(v,_)};y(W,v=>{a(c).gender&&v(ge)})}var ue=$(W,2);{var he=v=>{var _=Ee();X(_,5,()=>a(c).categories,Y,(Z,_e)=>{var J=De(),ye=m(J,!0);n(J),j(()=>F(ye,a(_e))),s(Z,J)}),n(_),s(v,_)};y(ue,v=>{a(c).categories&&a(c).categories.length>0&&v(he)})}n(M),j(()=>{F(me,a(c).name||"Unnamed Avatar"),F(pe,a(c).description||"No description available.")}),G("click",M,()=>p(a(c))),G("keydown",M,v=>v.key==="Enter"&&p(a(c))),s(fe,M)}),s(k,E)};y(q,k=>{a(e).length===0?k(de):k(ce,!1)},!0)}s(b,w)};y(ie,b=>{a(x)?b(le):b(ne,!1)},!0)}s(A,D)};y(l,A=>{a(S)?A(r):A(h,!1)})}n(g),s(t,g)},$$slots:{default:!0}});var se=$(V,2);{var oe=t=>{{let N=we(()=>a(d).name??"Unknown");Ne(t,{get title(){return a(N)},$$events:{close:o},children:(g,l)=>{$e(g,{get avatar(){return a(d)}})},$$slots:{default:!0}})}};y(se,t=>{a(u)&&a(d)&&t(oe)})}s(z,Q),te()}export{We as component};
