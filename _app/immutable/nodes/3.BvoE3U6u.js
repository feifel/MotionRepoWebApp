import"../chunks/DsnmJJEf.js";import"../chunks/Dz6n3ZlL.js";import{o as Ee,e as I,s as U}from"../chunks/BTuvHJGO.js";import{p as ae,f,d as y,a1 as V,_ as X,s as B,r as g,b as c,c as te,t as z,a as j,aq as Pe,l as t,A as C,ag as o,ap as Y,m as Ue}from"../chunks/BdiKIHD0.js";import{i as k}from"../chunks/CwSPiGWr.js";import{e as ve,i as ue}from"../chunks/DuI2qqPd.js";import{i as re}from"../chunks/OOFACt6R.js";import{a as ze}from"../chunks/Dkw99rV-.js";import{F as ge,S as De,M as fe}from"../chunks/D6XYiuBT.js";import{s as me}from"../chunks/DrhXIds-.js";import{p as ee}from"../chunks/DMFpSnWN.js";var je=f('<div class="screenshot-container svelte-1s84j4"><img class="screenshot svelte-1s84j4"/></div>'),Ge=f('<div class="body svelte-1s84j4"><!> <!></div>');function Re(E,F){ae(F,!1);let a=ee(F,"avatar",12),w=[{id:"name",type:"text",label:"Name",values:[a().name||""]},{id:"description",type:"textarea",label:"Description",values:[a().description||""]},{id:"file",type:"text",label:"File",values:[a().fileName||"N/A"]},{id:"fileType",type:"text",label:"File Type",values:[a().fileType||"N/A"]},{id:"gender",type:"enum",label:"Gender",values:[a().gender||"None"],options:["Male","Female","None"]},{id:"categories",type:"tags",label:"Categories",values:a().categories||[]}];function _(n){n.forEach(r=>{switch(r.id){case"name":a(a().name=r.values[0]||"",!0);break;case"description":a(a().description=r.values[0]||"",!0);break;case"file":a(a().fileName=r.values[0]||"",!0);break;case"fileType":a(a().fileType=r.values[0]||"",!0);break;case"gender":a(a().gender=r.values[0]||"",!0);break;case"categories":a(a().categories=r.values,!0);break}}),console.log("Avatar updated:",a()),alert(`Submit is not yet implemented

JSON Data:
`+JSON.stringify(a(),null,2))}re();var m=Ge(),v=y(m);{var $=n=>{var r=je(),S=y(r);g(r),z(()=>{me(S,"src",(V(a()),X(()=>a().screenshot))),me(S,"alt",(V(a()),X(()=>`[image of '${a().name||"Avatar"}' is missing]`)))}),c(n,r)};k(v,n=>{V(a()),X(()=>a().screenshot)&&n($)})}var i=B(v,2);ge(i,{get rows(){return w},readonly:!1,onSubmit:_}),g(m),c(E,m),te()}var We=f('<div class="body svelte-1bsh2eg"><!></div>');function qe(E,F){ae(F,!1);let a=ee(F,"onFilter",8),w=ee(F,"selectedFilters",8),_=[{id:"gender",type:"tags",label:"Gender",values:w().filter(i=>i.startsWith("gender:")).map(i=>i.replace("gender:","")),options:["Male","Female","Unisex"]},{id:"categories",type:"tags",label:"Categories",values:w().filter(i=>i.startsWith("category:")).map(i=>i.replace("category:","")),options:["Fantasy","Sci-Fi","Realistic","Cartoon","Historical","Steampunk","Cyberpunk","Horror","Anime","Gaming"]}];function m(i){const n=[];i.forEach(r=>{r.id==="categories"?n.push(...(r.values||[]).map(S=>`category:${S}`)):r.id==="gender"&&n.push(...(r.values||[]).map(S=>`gender:${S}`))}),a()(n)}re();var v=We(),$=y(v);ge($,{get rows(){return _},onSubmit:i=>m(i),readonly:!1}),g(v),c(E,v),te()}var Oe=f('<div class="loading svelte-z71ie7">Loading avatars...</div>'),Ze=f('<div class="error svelte-z71ie7"> </div>'),He=f('<div class="no-results svelte-z71ie7">No avatars found.</div>'),Je=f('<span class="tag"> </span>'),Ke=f('<span class="tag"> </span>'),Qe=f('<div class="categories"></div>'),Ie=f('<div class="result-card svelte-z71ie7" tabindex="0" role="button"><h3> </h3> <p> </p> <!> <!></div>'),Ve=f('<div class="container svelte-z71ie7"><!></div>'),Xe=f("<!> <!> <!>",1);function da(E,F){ae(F,!1);let a=C([]),w=[],_=C(!0),m=C(null),v=C(null),$=C(!1),i=C(!1),n=C([]),r="";async function S(e="",p=0,u=20){try{o(_,!0),o(m,null);const d=new URLSearchParams;e&&d.append("search",e),p&&d.append("offset",p.toString()),u&&d.append("limit",u.toString()),console.log("Fetching avatars with params:",d.toString());const l=await ze(`/avatars?${d}`);console.log("Received avatars data:",l),console.log("Type of data:",typeof l),console.log("Data structure:",Array.isArray(l)?"Array":"Object",l);const h=Array.isArray(l)?l:l.avatars||l.items||l.data||[];return console.log("Processed avatars array:",h),console.log("Number of avatars:",h.length),h}catch(d){return console.error("Error fetching avatars:",d),console.warn("Using mock data for development"),[{id:"1",name:"Athletic Male Avatar",description:"A versatile male avatar suitable for various workout demonstrations",gender:"Male",categories:["Athletic","Male","Standard"],fileName:"athletic_male.fbx",screenshot:"/api/placeholder/400/300",createdAt:"2024-01-15T10:00:00Z",createdBy:"admin"},{id:"2",name:"Athletic Female Avatar",description:"A versatile female avatar suitable for various workout demonstrations",gender:"Female",categories:["Athletic","Female","Standard"],fileName:"athletic_female.fbx",screenshot:"/api/placeholder/400/300",createdAt:"2024-01-16T10:00:00Z",createdBy:"admin"},{id:"3",name:"Beginner Male Avatar",description:"A male avatar designed for beginner-level workouts",gender:"Male",categories:["Beginner","Male"],fileName:"beginner_male.fbx",screenshot:"/api/placeholder/400/300",createdAt:"2024-01-17T10:00:00Z",createdBy:"trainer1"}].filter(l=>!e||l.name?.toLowerCase().includes(e.toLowerCase())||l.description?.toLowerCase().includes(e.toLowerCase())||l.categories?.some(h=>h.toLowerCase().includes(e.toLowerCase())))}finally{o(_,!1)}}function pe(e,p,u){const d=p.toLowerCase(),l=u.filter(s=>s.startsWith("category:")).map(s=>s.replace("category:","")),h=u.filter(s=>s.startsWith("gender:")).map(s=>s.replace("gender:",""));return e.filter(s=>{const M=!p||(s.name?.toLowerCase().includes(d)??!1)||(s.description?.toLowerCase().includes(d)??!1),W=l.length===0||l.every(O=>s.categories?.includes(O)??!1),q=h.length===0||h.includes(s.gender??"");return M&&W&&q})}async function G(){o(_,!0),o(m,null);try{w.length===0&&(w=await S()),o(a,pe(w,r,t(n)))}catch(e){o(m,e.message)}finally{o(_,!1)}}async function he(e){r=e,await G()}function se(e){o(v,e),o($,!0)}function le(){o($,!1),o(v,null)}function ye(){o(i,!0)}function R(){o(i,!1)}function ie(e){o(n,e),R(),G()}function _e(e){e.key==="Escape"&&(le(),R())}Ee(async()=>{await G()}),re();var oe=Xe();I("keydown",Pe,_e);var ne=j(oe);De(ne,{title:"Avatars",description:"Browse through all available avatars.",onSearch:he,onFilterClick:ye,get selectedFilters(){return t(n)},set selectedFilters(e){o(n,e)},$$events:{filterChanged:e=>{o(n,e.detail),ie(e.detail)}},children:(e,p)=>{var u=Ve(),d=y(u);{var l=s=>{var M=Oe();c(s,M)},h=s=>{var M=Y(),W=j(M);{var q=N=>{var L=Ze(),Z=y(L);g(L),z(()=>U(Z,`Error: ${t(m)??""}`)),c(N,L)},O=N=>{var L=Y(),Z=j(L);{var we=T=>{var D=He();c(T,D)},Se=T=>{var D=Y(),ke=j(D);ve(ke,1,()=>t(a),ue,($e,b)=>{var P=Ie(),H=y(P),xe=y(H,!0);g(H);var J=B(H,2),Ce=y(J,!0);g(J);var de=B(J,2);{var Me=A=>{var x=Je(),K=y(x,!0);g(x),z(()=>U(K,t(b).gender)),c(A,x)};k(de,A=>{t(b).gender&&A(Me)})}var Ne=B(de,2);{var Le=A=>{var x=Qe();ve(x,5,()=>t(b).categories,ue,(K,Te)=>{var Q=Ke(),Be=y(Q,!0);g(Q),z(()=>U(Be,t(Te))),c(K,Q)}),g(x),c(A,x)};k(Ne,A=>{t(b).categories&&t(b).categories.length>0&&A(Le)})}g(P),z(()=>{U(xe,t(b).name??"Unnamed Avatar"),U(Ce,t(b).description??"No description available.")}),I("click",P,()=>se(t(b))),I("keydown",P,A=>A.key==="Enter"&&se(t(b))),c($e,P)}),c(T,D)};k(Z,T=>{t(a).length===0?T(we):T(Se,!1)},!0)}c(N,L)};k(W,N=>{t(m)?N(q):N(O,!1)},!0)}c(s,M)};k(d,s=>{t(_)?s(l):s(h,!1)})}g(u),c(e,u)},$$slots:{default:!0},$$legacy:!0});var ce=B(ne,2);{var be=e=>{{let p=Ue(()=>t(v).name??"Unknown");fe(e,{get title(){return t(p)},$$events:{close:le},children:(u,d)=>{Re(u,{get avatar(){return t(v)}})},$$slots:{default:!0}})}};k(ce,e=>{t($)&&t(v)&&e(be)})}var Ae=B(ce,2);{var Fe=e=>{fe(e,{title:"Filter Avatars",$$events:{close:R},children:(p,u)=>{qe(p,{get selectedFilters(){return t(n)},onFilter:ie})},$$slots:{default:!0}})};k(Ae,e=>{t(i)&&e(Fe)})}c(E,oe),te()}export{da as component};
