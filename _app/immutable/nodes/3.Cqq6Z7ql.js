import"../chunks/DsnmJJEf.js";import"../chunks/wg71yvV_.js";import{c as ya,e as U,s as A,o as ba}from"../chunks/BiNhk7mX.js";import{p as pa,f as v,an as fa,d as r,r as e,s as n,a1 as c,_ as p,t as w,b as o,c as _a,l as i,a as aa,ad as k,A as J,ao as na}from"../chunks/BEEOVbQE.js";import{i as g}from"../chunks/16RbiagO.js";import{e as va,i as da}from"../chunks/DNWkYjzw.js";import{i as ma}from"../chunks/Bt_jEhOg.js";import{a as qa}from"../chunks/Dkw99rV-.js";import{S as xa}from"../chunks/w1TrZi6F.js";import{s as ca}from"../chunks/BVa_AGYl.js";import{p as ka}from"../chunks/N2umxR2V.js";var Ca=v('<div class="screenshot-container svelte-8lq783"><img class="screenshot svelte-8lq783"/></div>'),Ma=v('<section class="info-section svelte-8lq783"><h3 class="svelte-8lq783">Description</h3> <p> </p></section>'),Sa=v('<div class="info-item svelte-8lq783"><span class="label">Gender:</span> <span class="value"> </span></div>'),Ba=v('<div class="info-item svelte-8lq783"><span class="label">File Name:</span> <span class="value"> </span></div>'),La=v('<span class="tag svelte-8lq783"> </span>'),Na=v('<section class="info-section svelte-8lq783"><h3 class="svelte-8lq783">Categories</h3> <div class="tags svelte-8lq783"></div></section>'),$a=v('<div class="info-item svelte-8lq783"><span class="label">Created:</span> <span class="value"> </span></div>'),Da=v('<div class="info-item svelte-8lq783"><span class="label">Updated:</span> <span class="value"> </span></div>'),ja=v('<div class="info-item svelte-8lq783"><span class="label">Created By:</span> <span class="value"> </span></div>'),Ea=v('<section class="info-section svelte-8lq783"><h3 class="svelte-8lq783">Metadata</h3> <div class="info-list svelte-8lq783"><!> <!> <!></div></section>'),Fa=v('<div class="modal-backdrop svelte-8lq783" role="button" tabindex="0" aria-label="Close modal"><div class="modal-content svelte-8lq783"><div class="modal-header svelte-8lq783"><h1 class="svelte-8lq783"> </h1> <button class="close-button svelte-8lq783" aria-label="Close modal"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line></svg></button></div> <div class="modal-body svelte-8lq783"><!> <div class="info-grid svelte-8lq783"><!> <section class="info-section svelte-8lq783"><h3 class="svelte-8lq783">Basic Information</h3> <div class="info-list svelte-8lq783"><!> <!></div></section> <!> <!></div></div></div></div>');function Ta(ea,Q){pa(Q,!1);let a=ka(Q,"avatar",8);const G=ya();function D(){G("close")}function z(t){t.target===t.currentTarget&&D()}function j(t){t.key==="Escape"&&D()}ma();var C=Fa();U("keydown",fa,j);var V=r(C),P=r(V),R=r(P),ta=r(R,!0);e(R);var W=n(R,2);e(P);var O=n(P,2),X=r(O);{var ra=t=>{var s=Ca(),d=r(s);e(s),w(()=>{ca(d,"src",(c(a()),p(()=>a().screenshot))),ca(d,"alt",(c(a()),p(()=>a().name||"Avatar")))}),o(t,s)};g(X,t=>{c(a()),p(()=>a().screenshot)&&t(ra)})}var l=n(X,2),Z=r(l);{var M=t=>{var s=Ma(),d=n(r(s),2),_=r(d,!0);e(d),e(s),w(()=>A(_,(c(a()),p(()=>a().description)))),o(t,s)};g(Z,t=>{c(a()),p(()=>a().description)&&t(M)})}var u=n(Z,2),f=n(r(u),2),q=r(f);{var S=t=>{var s=Sa(),d=n(r(s),2),_=r(d,!0);e(d),e(s),w(()=>A(_,(c(a()),p(()=>a().gender)))),o(t,s)};g(q,t=>{c(a()),p(()=>a().gender)&&t(S)})}var I=n(q,2);{var sa=t=>{var s=Ba(),d=n(r(s),2),_=r(d,!0);e(d),e(s),w(()=>A(_,(c(a()),p(()=>a().fileName)))),o(t,s)};g(I,t=>{c(a()),p(()=>a().fileName)&&t(sa)})}e(f),e(u);var Y=n(u,2);{var oa=t=>{var s=Na(),d=n(r(s),2);va(d,5,()=>(c(a()),p(()=>a().categories)),da,(_,N)=>{var $=La(),H=r($,!0);e($),w(()=>A(H,i(N))),o(_,$)}),e(d),e(s),o(t,s)};g(Y,t=>{c(a()),p(()=>a().categories&&a().categories.length>0)&&t(oa)})}var B=n(Y,2);{var L=t=>{var s=Ea(),d=n(r(s),2),_=r(d);{var N=m=>{var h=$a(),y=n(r(h),2),F=r(y,!0);e(y),e(h),w(K=>A(F,K),[()=>(c(a()),p(()=>new Date(a().createdAt).toLocaleDateString()))]),o(m,h)};g(_,m=>{c(a()),p(()=>a().createdAt)&&m(N)})}var $=n(_,2);{var H=m=>{var h=Da(),y=n(r(h),2),F=r(y,!0);e(y),e(h),w(K=>A(F,K),[()=>(c(a()),p(()=>new Date(a().updatedAt).toLocaleDateString()))]),o(m,h)};g($,m=>{c(a()),p(()=>a().updatedAt)&&m(H)})}var b=n($,2);{var E=m=>{var h=ja(),y=n(r(h),2),F=r(y,!0);e(y),e(h),w(()=>A(F,(c(a()),p(()=>a().createdBy)))),o(m,h)};g(b,m=>{c(a()),p(()=>a().createdBy)&&m(E)})}e(d),e(s),o(t,s)};g(B,t=>{c(a()),p(()=>a().createdAt)&&t(L)})}e(l),e(O),e(V),e(C),w(()=>A(ta,(c(a()),p(()=>a().name||"Unnamed Avatar")))),U("click",W,D),U("click",C,z),U("keydown",C,j),o(ea,C),_a()}var Ua=v('<div class="loading svelte-11rz51j">Loading avatars...</div>'),za=v('<div class="error svelte-11rz51j"> </div>'),Pa=v('<div class="no-results svelte-11rz51j">No avatars found.</div>'),Ra=v('<span class="tag"> </span>'),Za=v('<span class="tag"> </span>'),Ia=v('<div class="categories"></div>'),Ka=v('<div class="result-card svelte-11rz51j" tabindex="0" role="button"><h3> </h3> <p> </p> <!> <!></div>'),Ga=v('<div class="result-grid"><!></div>'),Oa=v("<!> <!>",1);function se(ea,Q){pa(Q,!1);let a=J([]),G=J(!0),D=J(null),z=J(null),j=J(!1);async function C(l="",Z=0,M=20){try{k(G,!0),k(D,null);const u=new URLSearchParams;l&&u.append("search",l),Z&&u.append("offset",Z.toString()),M&&u.append("limit",M.toString()),console.log("Fetching avatars with params:",u.toString());const f=await qa(`/avatars?${u}`);console.log("Received avatars data:",f),console.log("Type of data:",typeof f),console.log("Data structure:",Array.isArray(f)?"Array":"Object",f);const q=Array.isArray(f)?f:f.avatars||f.items||f.data||[];return console.log("Processed avatars array:",q),console.log("Number of avatars:",q.length),q}catch(u){return console.error("Error fetching avatars:",u),console.warn("Using mock data for development"),[{id:"1",name:"Athletic Male Avatar",description:"A versatile male avatar suitable for various workout demonstrations",gender:"Male",categories:["Athletic","Male","Standard"],fileName:"athletic_male.fbx",screenshot:"/api/placeholder/400/300",createdAt:"2024-01-15T10:00:00Z",createdBy:"admin"},{id:"2",name:"Athletic Female Avatar",description:"A versatile female avatar suitable for various workout demonstrations",gender:"Female",categories:["Athletic","Female","Standard"],fileName:"athletic_female.fbx",screenshot:"/api/placeholder/400/300",createdAt:"2024-01-16T10:00:00Z",createdBy:"admin"},{id:"3",name:"Beginner Male Avatar",description:"A male avatar designed for beginner-level workouts",gender:"Male",categories:["Beginner","Male"],fileName:"beginner_male.fbx",screenshot:"/api/placeholder/400/300",createdAt:"2024-01-17T10:00:00Z",createdBy:"trainer1"}].filter(f=>!l||f.name?.toLowerCase().includes(l.toLowerCase())||f.description?.toLowerCase().includes(l.toLowerCase())||f.categories?.some(q=>q.toLowerCase().includes(l.toLowerCase())))}finally{k(G,!1)}}async function V(l){console.log("Search triggered with query:",l),k(a,await C(l)),console.log("Avatars updated after search, length:",i(a).length)}function P(l){k(z,l),k(j,!0)}function R(){k(j,!1),k(z,null)}function ta(l){l.key==="Escape"&&i(j)&&R()}ba(async()=>{console.log("Component mounted, fetching initial avatars..."),k(a,await C()),console.log("Initial avatars loaded, length:",i(a).length)}),ma();var W=Oa();U("keydown",fa,ta);var O=aa(W);xa(O,{title:"Avatars",description:"Browse and search for avatars.",onSearch:V,children:(l,Z)=>{var M=Ga(),u=r(M);{var f=S=>{var I=Ua();o(S,I)},q=S=>{var I=na(),sa=aa(I);{var Y=B=>{var L=za(),t=r(L);e(L),w(()=>A(t,`Error: ${i(D)??""}`)),o(B,L)},oa=B=>{var L=na(),t=aa(L);{var s=_=>{var N=Pa();o(_,N)},d=_=>{var N=na(),$=aa(N);va($,1,()=>i(a),da,(H,b)=>{var E=Ka(),m=r(E),h=r(m,!0);e(m);var y=n(m,2),F=r(y,!0);e(y);var K=n(y,2);{var ga=x=>{var T=Ra(),la=r(T,!0);e(T),w(()=>A(la,i(b).gender)),o(x,T)};g(K,x=>{i(b).gender&&x(ga)})}var ua=n(K,2);{var ha=x=>{var T=Ia();va(T,5,()=>i(b).categories,da,(la,wa)=>{var ia=Za(),Aa=r(ia,!0);e(ia),w(()=>A(Aa,i(wa))),o(la,ia)}),e(T),o(x,T)};g(ua,x=>{i(b).categories&&i(b).categories.length>0&&x(ha)})}e(E),w(()=>{A(h,i(b).name||"Unnamed Avatar"),A(F,i(b).description||"No description available.")}),U("click",E,()=>P(i(b))),U("keydown",E,x=>x.key==="Enter"&&P(i(b))),o(H,E)}),o(_,N)};g(t,_=>{i(a).length===0?_(s):_(d,!1)},!0)}o(B,L)};g(sa,B=>{i(D)?B(Y):B(oa,!1)},!0)}o(S,I)};g(u,S=>{i(G)?S(f):S(q,!1)})}e(M),o(l,M)},$$slots:{default:!0}});var X=n(O,2);{var ra=l=>{Ta(l,{get avatar(){return i(z)},$$events:{close:R}})};g(X,l=>{i(j)&&i(z)&&l(ra)})}o(ea,W),_a()}export{se as component};
