import"../chunks/DsnmJJEf.js";import"../chunks/BJB4Ptj-.js";import{o as ne,s as m,e as ve}from"../chunks/DrQHHxrB.js";import{p as de,f as i,d as n,a1 as z,_ as O,s as c,r as l,b as r,c as ce,t as f,a as j,ag as y,l as e,A as J,aq as V,m as Te}from"../chunks/i1UHJtEQ.js";import{i as g}from"../chunks/DSE7bfqq.js";import{e as L,i as F}from"../chunks/C7ZwHSTt.js";import{i as ue}from"../chunks/BuUzJufj.js";import{a as $e}from"../chunks/Dkw99rV-.js";import{F as He,S as Je,M as Ne}from"../chunks/CuQNFyog.js";import{s as pe}from"../chunks/CF0yLBAV.js";import{p as Ke}from"../chunks/B2yB9kBp.js";var De=i('<div class="screenshot-container svelte-1s84j4"><img class="screenshot svelte-1s84j4"/></div>'),Re=i('<div class="body svelte-1s84j4"><!> <!></div>');function Ue(X,N){de(N,!1);let o=Ke(N,"motion",8),G=[{id:"description",type:"textarea",label:"Description",values:[o().description||"N/A"]},{id:"file",type:"text",label:"File",values:[o().file||"N/A"]},{id:"fileType",type:"text",label:"File Type",values:[o().fileType||"N/A"]},{id:"level",type:"enum",label:"Level",values:["intermediate"],options:["beginner","intermediate","advanced"]},{id:"equipment",type:"tags",label:"Equipment",values:o().equipment||[],options:["KettleBell","Dumbbell"]},{id:"bodyParts",type:"tags",label:"Body Parts",values:o().bodyParts||[]},{id:"muscleGroups",type:"tags",label:"Muscle Groups",values:o().muscleGroups||[]},{id:"categories",type:"tags",label:"Categories",values:o().categories||[]},{id:"primaryJoints",type:"tags",label:"Primary Joints",values:o().primaryJoints||[]},{id:"labels",type:"tags",label:"Labels",values:o().labels||[]}];ue();var w=Re(),b=n(w);{var S=C=>{var M=De(),E=n(M);l(M),f(()=>{pe(E,"src",(z(o()),O(()=>o().screenshot))),pe(E,"alt",(z(o()),O(()=>`[image of '${o().name||"Avatar"}' is missing]`)))}),r(C,M)};g(b,C=>{z(o()),O(()=>o().screenshot)&&C(S)})}var K=c(b,2);He(K,{get rows(){return G},readonly:!1}),l(w),r(X,w),ce()}var je=i('<div class="loading">Loading motions...</div>'),Xe=i('<div class="error"> </div>'),We=i('<div class="no-results">No motions found.</div>'),Ye=i('<span class="file-type svelte-qs2apu"> </span>'),Ie=i('<span class="level svelte-qs2apu"> </span>'),Qe=i('<span class="file-name svelte-qs2apu"> </span>'),ze=i('<span class="category svelte-qs2apu"> </span>'),Oe=i('<div class="categories svelte-qs2apu"></div>'),Ve=i('<span class="body-part svelte-qs2apu"> </span>'),Ze=i('<div class="body-parts svelte-qs2apu"><strong class="svelte-qs2apu">Body Parts:</strong> <!></div>'),ea=i('<span class="muscle-group svelte-qs2apu"> </span>'),aa=i('<div class="muscle-groups svelte-qs2apu"><strong class="svelte-qs2apu">Muscle Groups:</strong> <!></div>'),sa=i('<span class="equip svelte-qs2apu"> </span>'),ta=i('<div class="equipment svelte-qs2apu"><strong class="svelte-qs2apu">Equipment:</strong> <!></div>'),ra=i('<span class="label svelte-qs2apu"> </span>'),oa=i('<div class="labels svelte-qs2apu"></div>'),la=i('<div class="result-card" role="button" tabindex="0"><h3> </h3> <p> </p> <div class="motion-details svelte-qs2apu"><!> <!> <!></div> <!> <!> <!> <!> <!></div>'),ia=i('<div class="result-grid svelte-qs2apu"><!></div>'),na=i("<!> <!>",1);function ba(X,N){de(N,!1);let o=J([]),G=J(!0),w=J(null),b=J(null),S=J(!1);async function K(v="",T=0,q=20){try{y(G,!0),y(w,null);const _=new URLSearchParams;v&&_.append("search",v),T&&_.append("offset",T.toString()),q&&_.append("limit",q.toString()),console.log("Fetching motions with params:",_.toString());const x=await $e(`/motions?${_}`);console.log("Received motions data:",x);const D=Array.isArray(x)?x:x.motions||x.items||x.data||[];return console.log("Processed motions array:",D),D}catch(_){return console.error("Error fetching motions:",_),console.warn("Using mock data for development"),[{id:"1",name:"Walking Motion",description:"Natural walking cycle for human characters",file:"walking_motion.fbx",fileType:"FBX",level:1,equipment:["None"],bodyParts:["Legs","Arms","Core"],muscleGroups:["Quadriceps","Hamstrings","Calves","Glutes"],categories:["Locomotion","Basic"],primaryJoints:["Hip","Knee","Ankle","Shoulder"],labels:["natural","locomotion","cycle","human"],screenshot:"/api/placeholder/400/300"},{id:"2",name:"Running Sprint",description:"High-intensity sprinting motion for athletic characters",file:"running_sprint.fbx",fileType:"FBX",level:3,equipment:["Running Shoes"],bodyParts:["Legs","Arms","Core","Full Body"],muscleGroups:["Quadriceps","Hamstrings","Calves","Glutes","Core"],categories:["Locomotion","Athletic","High Intensity"],primaryJoints:["Hip","Knee","Ankle","Elbow","Shoulder"],labels:["sprint","athletic","high-energy","sport"],screenshot:"/api/placeholder/400/300"},{id:"3",name:"Boxing Jab Cross",description:"Basic boxing combination with jab and cross punches",file:"boxing_combo.fbx",fileType:"FBX",level:2,equipment:["Boxing Gloves"],bodyParts:["Arms","Shoulders","Core","Legs"],muscleGroups:["Deltoids","Biceps","Triceps","Core","Legs"],categories:["Combat","Upper Body","Athletic"],primaryJoints:["Shoulder","Elbow","Wrist","Hip","Knee"],labels:["boxing","combat","striking","combination"],screenshot:"/api/placeholder/400/300"},{id:"4",name:"Yoga Sun Salutation",description:"Flowing yoga sequence connecting breath with movement",file:"yoga_sun_salutation.fbx",fileType:"FBX",level:2,equipment:["Yoga Mat"],bodyParts:["Full Body","Arms","Legs","Core"],muscleGroups:["Full Body","Core","Shoulders","Legs"],categories:["Yoga","Flexibility","Wellness"],primaryJoints:["Spine","Shoulder","Hip","Knee","Ankle"],labels:["yoga","flow","wellness","flexibility"],screenshot:"/api/placeholder/400/300"}]}}async function C(v){console.log("Search triggered with query:",v),y(o,await K(v)),console.log("Motions updated after search, length:",e(o).length)}function M(v){y(b,v),y(S,!0)}function E(){y(S,!1),y(b,null)}function Z(v){v.key==="Escape"&&e(S)&&E()}ne(()=>(document.addEventListener("keydown",Z),()=>{document.removeEventListener("keydown",Z)})),ne(async()=>{console.log("Component mounted, fetching initial motions..."),y(o,await K()),y(G,!1),console.log("Initial motions loaded, length:",e(o).length)}),ue();var ee=na(),ae=j(ee);Je(ae,{title:"Motions",description:"Browse and search for motions.",onSearch:C,children:(v,T)=>{var q=ia(),_=n(q);{var x=k=>{var R=je();r(k,R)},D=k=>{var R=V(),fe=j(R);{var _e=A=>{var B=Xe(),W=n(B);l(B),f(()=>m(W,`Error: ${e(w)??""}`)),r(A,B)},he=A=>{var B=V(),W=j(B);{var ye=P=>{var U=We();r(P,U)},be=P=>{var U=V(),qe=j(U);L(qe,1,()=>e(o),F,(xe,t)=>{var $=la(),Y=n($),we=n(Y,!0);l(Y);var I=c(Y,2),Se=n(I,!0);l(I);var Q=c(I,2),se=n(Q);{var Me=a=>{var s=Ye(),p=n(s,!0);l(s),f(()=>m(p,e(t).fileType)),r(a,s)};g(se,a=>{e(t).fileType&&a(Me)})}var te=c(se,2);{var ke=a=>{var s=Ie(),p=n(s);l(s),f(()=>m(p,`Level ${e(t).level??""}`)),r(a,s)};g(te,a=>{e(t).level!==void 0&&a(ke)})}var Ae=c(te,2);{var Be=a=>{var s=Qe(),p=n(s,!0);l(s),f(()=>m(p,e(t).file)),r(a,s)};g(Ae,a=>{e(t).file&&a(Be)})}l(Q);var re=c(Q,2);{var Pe=a=>{var s=Oe();L(s,5,()=>e(t).categories,F,(p,h)=>{var u=ze(),d=n(u,!0);l(u),f(()=>m(d,e(h))),r(p,u)}),l(s),r(a,s)};g(re,a=>{e(t).categories&&e(t).categories.length>0&&a(Pe)})}var oe=c(re,2);{var Le=a=>{var s=Ze(),p=c(n(s),2);L(p,1,()=>e(t).bodyParts,F,(h,u)=>{var d=Ve(),H=n(d,!0);l(d),f(()=>m(H,e(u))),r(h,d)}),l(s),r(a,s)};g(oe,a=>{e(t).bodyParts&&e(t).bodyParts.length>0&&a(Le)})}var le=c(oe,2);{var Fe=a=>{var s=aa(),p=c(n(s),2);L(p,1,()=>e(t).muscleGroups,F,(h,u)=>{var d=ea(),H=n(d,!0);l(d),f(()=>m(H,e(u))),r(h,d)}),l(s),r(a,s)};g(le,a=>{e(t).muscleGroups&&e(t).muscleGroups.length>0&&a(Fe)})}var ie=c(le,2);{var Ge=a=>{var s=ta(),p=c(n(s),2);L(p,1,()=>e(t).equipment,F,(h,u)=>{var d=sa(),H=n(d,!0);l(d),f(()=>m(H,e(u))),r(h,d)}),l(s),r(a,s)};g(ie,a=>{e(t).equipment&&e(t).equipment.length>0&&a(Ge)})}var Ce=c(ie,2);{var Ee=a=>{var s=oa();L(s,5,()=>e(t).labels,F,(p,h)=>{var u=ra(),d=n(u,!0);l(u),f(()=>m(d,e(h))),r(p,u)}),l(s),r(a,s)};g(Ce,a=>{e(t).labels&&e(t).labels.length>0&&a(Ee)})}l($),f(()=>{m(we,e(t).name||"Unnamed Motion"),m(Se,e(t).description||"No description available.")}),ve("click",$,()=>M(e(t))),ve("keydown",$,a=>a.key==="Enter"&&M(e(t))),r(xe,$)}),r(P,U)};g(W,P=>{e(o).length===0?P(ye):P(be,!1)},!0)}r(A,B)};g(fe,A=>{e(w)?A(_e):A(he,!1)},!0)}r(k,R)};g(_,k=>{e(G)?k(x):k(D,!1)})}l(q),r(v,q)},$$slots:{default:!0}});var ge=c(ae,2);{var me=v=>{{let T=Te(()=>e(b).name??"Unknown");Ne(v,{get title(){return e(T)},$$events:{close:E},children:(q,_)=>{Ue(q,{get motion(){return e(b)}})},$$slots:{default:!0}})}};g(ge,v=>{e(S)&&e(b)&&v(me)})}r(X,ee),ce()}export{ba as component};
