import"../chunks/DsnmJJEf.js";import"../chunks/CDpiRAkj.js";import{s as X,e as Y,o as _e}from"../chunks/Dfnk_7le.js";import{p as O,f as C,d as w,a1 as F,_ as k,s as E,r as S,b as f,c as Z,t as ee,aq as q,a as D,l as n,ax as Ae,A as x,ag as o,m as Fe}from"../chunks/CUEAen0f.js";import{i as M}from"../chunks/B_kiZDQ4.js";import{e as ne,i as ce}from"../chunks/Dtdogyub.js";import{i as H}from"../chunks/cw9HsNIX.js";import{a as ke}from"../chunks/Dkw99rV-.js";import{F as de,T as le,S as we,M as ie}from"../chunks/C6y3NVlG.js";import{s as oe}from"../chunks/6tPKXEvI.js";import{p as G}from"../chunks/BE9ruRDv.js";var Se=C('<div class="screenshot-container svelte-1s84j4"><img class="screenshot svelte-1s84j4"/></div>'),Ce=C('<div class="body svelte-1s84j4"><!> <!></div>');function Me($,g){O(g,!1);let e=G(g,"avatar",12),p=[{id:"name",type:"text",label:"Name",values:[e().name||""]},{id:"description",type:"textarea",label:"Description",values:[e().description||""]},{id:"file",type:"text",label:"File",values:[e().fileName||"N/A"]},{id:"fileType",type:"text",label:"File Type",values:[e().fileType||"N/A"]},{id:"gender",type:"enum",label:"Gender",values:[e().gender||"None"],options:["Male","Female","None"]},{id:"categories",type:"tags",label:"Categories",values:e().categories||[]}];function c(s){s.forEach(t=>{switch(t.id){case"name":e(e().name=t.values[0]||"",!0);break;case"description":e(e().description=t.values[0]||"",!0);break;case"file":e(e().fileName=t.values[0]||"",!0);break;case"fileType":e(e().fileType=t.values[0]||"",!0);break;case"gender":e(e().gender=t.values[0]||"",!0);break;case"categories":e(e().categories=t.values,!0);break}}),console.log("Avatar updated:",e()),alert(`Submit is not yet implemented

JSON Data:
`+JSON.stringify(e(),null,2))}H();var d=Ce(),v=w(d);{var h=s=>{var t=Se(),b=w(t);S(t),ee(()=>{oe(b,"src",(F(e()),k(()=>e().screenshot))),oe(b,"alt",(F(e()),k(()=>`[image of '${e().name||"Avatar"}' is missing]`)))}),f(s,t)};M(v,s=>{F(e()),k(()=>e().screenshot)&&s(h)})}var r=E(v,2);de(r,{get rows(){return p},readonly:!1,onSubmit:c}),S(d),f($,d),Z()}var $e=C('<div class="body svelte-1bsh2eg"><!></div>');function xe($,g){O(g,!1);let e=G(g,"onFilter",8),p=G(g,"selectedFilters",8),c=[{id:"gender",type:"tags",label:"Gender",values:p().filter(r=>r.startsWith("gender:")).map(r=>r.replace("gender:","")),options:["Male","Female","Unisex"]},{id:"categories",type:"tags",label:"Categories",values:p().filter(r=>r.startsWith("category:")).map(r=>r.replace("category:","")),options:["Fantasy","Sci-Fi","Realistic","Cartoon","Historical","Steampunk","Cyberpunk","Horror","Anime","Gaming"]}];function d(r){const s=[];r.forEach(t=>{t.id==="categories"?s.push(...(t.values||[]).map(b=>`category:${b}`)):t.id==="gender"&&s.push(...(t.values||[]).map(b=>`gender:${b}`))}),e()(s)}H();var v=$e(),h=w(v);de(h,{get rows(){return c},onSubmit:r=>d(r),readonly:!1}),S(v),f($,v),Z()}var Ne=C('<div class="result-card" role="button" tabindex="0"><h3> </h3> <p> </p> <div class="tags svelte-av094a"><!> <!></div></div>');function Le($,g){O(g,!1);let e=G(g,"avatar",8),p=G(g,"onClick",8);H();var c=Ne(),d=w(c),v=w(d,!0);S(d);var h=E(d,2),r=w(h,!0);S(h);var s=E(h,2),t=w(s);{var b=y=>{le(y,{get tag(){return`Gender: ${F(e()),k(()=>e().gender)??""}`},readonly:!0})};M(t,y=>{F(e()),k(()=>e().gender)&&y(b)})}var J=E(t,2);{var P=y=>{var j=q(),R=D(j);ne(R,1,()=>(F(e()),k(()=>e().categories)),ce,(K,U)=>{le(K,{get tag(){return`Category: ${n(U)??""}`},readonly:!0})}),f(y,j)};M(J,y=>{F(e()),k(()=>e().categories&&e().categories.length>0)&&y(P)})}S(s),S(c),ee(()=>{X(v,(F(e()),k(()=>e().name??"Unnamed Avatar"))),X(r,(F(e()),k(()=>e().description??"No description available.")))}),Y("click",c,()=>p()(e())),Y("keydown",c,y=>y.key==="Enter"&&p()(e())),f($,c),Z()}var Te=C('<div class="loading svelte-61krc7">Loading avatars...</div>'),Be=C('<div class="error svelte-61krc7"> </div>'),Ee=C('<div class="no-results svelte-61krc7">No avatars found.</div>'),Pe=C('<div class="container svelte-61krc7"><!></div>'),Ue=C("<!> <!> <!>",1);function Qe($,g){O(g,!1);let e=x([]),p=[],c=x(!0),d=x(null),v=x(null),h=x(!1),r=x(!1),s=x([]),t="";async function b(a="",_=0,m=20){try{o(c,!0),o(d,null);const u=new URLSearchParams;a&&u.append("search",a),_&&u.append("offset",_.toString()),m&&u.append("limit",m.toString()),console.log("Fetching avatars with params:",u.toString());const i=await ke(`/avatars?${u}`);console.log("Received avatars data:",i),console.log("Type of data:",typeof i),console.log("Data structure:",Array.isArray(i)?"Array":"Object",i);const A=Array.isArray(i)?i:i.avatars||i.items||i.data||[];return console.log("Processed avatars array:",A),console.log("Number of avatars:",A.length),A}catch(u){return console.error("Error fetching avatars:",u),console.warn("Using mock data for development"),[{id:"1",name:"Athletic Male Avatar",description:"A versatile male avatar suitable for various workout demonstrations",gender:"Male",categories:["Athletic","Male","Standard"],fileName:"athletic_male.fbx",screenshot:"/api/placeholder/400/300",createdAt:"2024-01-15T10:00:00Z",createdBy:"admin"},{id:"2",name:"Athletic Female Avatar",description:"A versatile female avatar suitable for various workout demonstrations",gender:"Female",categories:["Athletic","Female","Standard"],fileName:"athletic_female.fbx",screenshot:"/api/placeholder/400/300",createdAt:"2024-01-16T10:00:00Z",createdBy:"admin"},{id:"3",name:"Beginner Male Avatar",description:"A male avatar designed for beginner-level workouts",gender:"Male",categories:["Beginner","Male"],fileName:"beginner_male.fbx",screenshot:"/api/placeholder/400/300",createdAt:"2024-01-17T10:00:00Z",createdBy:"trainer1"}].filter(i=>!a||i.name?.toLowerCase().includes(a.toLowerCase())||i.description?.toLowerCase().includes(a.toLowerCase())||i.categories?.some(A=>A.toLowerCase().includes(a.toLowerCase())))}finally{o(c,!1)}}function J(a,_,m){const u=_.toLowerCase(),i=m.filter(l=>l.startsWith("category:")).map(l=>l.replace("category:","")),A=m.filter(l=>l.startsWith("gender:")).map(l=>l.replace("gender:",""));return a.filter(l=>{const N=!_||(l.name?.toLowerCase().includes(u)??!1)||(l.description?.toLowerCase().includes(u)??!1),Q=i.length===0||i.every(I=>l.categories?.includes(I)??!1),z=A.length===0||A.includes(l.gender??"");return N&&Q&&z})}async function P(){o(c,!0),o(d,null);try{p.length===0&&(p=await b()),o(e,J(p,t,n(s)))}catch(a){o(d,a.message)}finally{o(c,!1)}}async function y(a){t=a,await P()}function j(a){o(v,a),o(h,!0)}function R(){o(h,!1),o(v,null)}function K(){o(r,!0)}function U(){o(r,!1)}function ae(a){o(s,a),U(),P()}function ve(a){a.key==="Escape"&&(R(),U())}_e(async()=>{await P()}),H();var te=Ue();Y("keydown",Ae,ve);var re=D(te);we(re,{title:"Avatars",description:"Browse through all available avatars.",onSearch:y,onFilterClick:K,get selectedFilters(){return n(s)},set selectedFilters(a){o(s,a)},$$events:{filterChanged:a=>{o(s,a.detail),ae(a.detail)}},children:(a,_)=>{var m=Pe(),u=w(m);{var i=l=>{var N=Te();f(l,N)},A=l=>{var N=q(),Q=D(N);{var z=L=>{var T=Be(),V=w(T);S(T),ee(()=>X(V,`Error: ${n(d)??""}`)),f(L,T)},I=L=>{var T=q(),V=D(T);{var me=B=>{var W=Ee();f(B,W)},pe=B=>{var W=q(),he=D(W);ne(he,1,()=>n(e),ce,(ye,be)=>{Le(ye,{get avatar(){return n(be)},onClick:j})}),f(B,W)};M(V,B=>{n(e).length===0?B(me):B(pe,!1)},!0)}f(L,T)};M(Q,L=>{n(d)?L(z):L(I,!1)},!0)}f(l,N)};M(u,l=>{n(c)?l(i):l(A,!1)})}S(m),f(a,m)},$$slots:{default:!0},$$legacy:!0});var se=E(re,2);{var ue=a=>{{let _=Fe(()=>n(v).name??"Unknown");ie(a,{get title(){return n(_)},$$events:{close:R},children:(m,u)=>{Me(m,{get avatar(){return n(v)}})},$$slots:{default:!0}})}};M(se,a=>{n(h)&&n(v)&&a(ue)})}var fe=E(se,2);{var ge=a=>{ie(a,{title:"Filter Avatars",$$events:{close:U},children:(_,m)=>{xe(_,{get selectedFilters(){return n(s)},onFilter:ae})},$$slots:{default:!0}})};M(fe,a=>{n(r)&&a(ge)})}f($,te),Z()}export{Qe as component};
