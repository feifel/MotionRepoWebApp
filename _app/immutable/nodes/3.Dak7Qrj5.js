import"../chunks/DsnmJJEf.js";import"../chunks/Q_UR_ltu.js";import{s as G,e as ee,o as _e}from"../chunks/DMix97Y1.js";import{p as H,f as h,d as w,a1 as C,_ as x,s as E,r as b,b as v,c as J,t as R,l as n,a as Z,aS as be,A as N,ag as o,aq as Y,m as Ae}from"../chunks/DkSlEKLF.js";import{i as M}from"../chunks/DR9kWPJI.js";import{e as oe,i as ne}from"../chunks/DJrF9YgH.js";import{i as K}from"../chunks/BN1ixJJB.js";import{a as Fe}from"../chunks/Dkw99rV-.js";import{F as ce,S as ke,M as le}from"../chunks/BP836y0s.js";import{s as ie}from"../chunks/D5c6cWyZ.js";import{p as W}from"../chunks/e_GyjuQh.js";var we=h('<div class="screenshot-container svelte-1s84j4"><img class="screenshot svelte-1s84j4"/></div>'),Se=h('<div class="body svelte-1s84j4"><!> <!></div>');function Ce($,g){H(g,!1);let e=W(g,"avatar",12),y=[{id:"name",type:"text",label:"Name",values:[e().name||""]},{id:"description",type:"textarea",label:"Description",values:[e().description||""]},{id:"file",type:"text",label:"File",values:[e().fileName||"N/A"]},{id:"fileType",type:"text",label:"File Type",values:[e().fileType||"N/A"]},{id:"gender",type:"enum",label:"Gender",values:[e().gender||"None"],options:["Male","Female","None"]},{id:"categories",type:"tags",label:"Categories",values:e().categories||[]}];function c(s){s.forEach(t=>{switch(t.id){case"name":e(e().name=t.values[0]||"",!0);break;case"description":e(e().description=t.values[0]||"",!0);break;case"file":e(e().fileName=t.values[0]||"",!0);break;case"fileType":e(e().fileType=t.values[0]||"",!0);break;case"gender":e(e().gender=t.values[0]||"",!0);break;case"categories":e(e().categories=t.values,!0);break}}),console.log("Avatar updated:",e()),alert(`Submit is not yet implemented

JSON Data:
`+JSON.stringify(e(),null,2))}K();var d=Se(),u=w(d);{var _=s=>{var t=we(),A=w(t);b(t),R(()=>{ie(A,"src",(C(e()),x(()=>e().screenshot))),ie(A,"alt",(C(e()),x(()=>`[image of '${e().name||"Avatar"}' is missing]`)))}),v(s,t)};M(u,s=>{C(e()),x(()=>e().screenshot)&&s(_)})}var r=E(u,2);ce(r,{get rows(){return y},readonly:!1,onSubmit:c}),b(d),v($,d),J()}var xe=h('<div class="body svelte-1bsh2eg"><!></div>');function Me($,g){H(g,!1);let e=W(g,"onFilter",8),y=W(g,"selectedFilters",8),c=[{id:"gender",type:"tags",label:"Gender",values:y().filter(r=>r.startsWith("gender:")).map(r=>r.replace("gender:","")),options:["Male","Female","Unisex"]},{id:"categories",type:"tags",label:"Categories",values:y().filter(r=>r.startsWith("category:")).map(r=>r.replace("category:","")),options:["Fantasy","Sci-Fi","Realistic","Cartoon","Historical","Steampunk","Cyberpunk","Horror","Anime","Gaming"]}];function d(r){const s=[];r.forEach(t=>{t.id==="categories"?s.push(...(t.values||[]).map(A=>`category:${A}`)):t.id==="gender"&&s.push(...(t.values||[]).map(A=>`gender:${A}`))}),e()(s)}K();var u=xe(),_=w(u);ce(_,{get rows(){return c},onSubmit:r=>d(r),readonly:!1}),b(u),v($,u),J()}var $e=h('<span class="tag svelte-1mjsetn"> </span>'),Ne=h('<span class="tag svelte-1mjsetn"> </span>'),Le=h('<div class="categories svelte-1mjsetn"></div>'),je=h('<div class="result-card svelte-1mjsetn" role="button" tabindex="0"><h3 class="svelte-1mjsetn"> </h3> <p class="svelte-1mjsetn"> </p> <!> <!></div>');function Te($,g){H(g,!1);let e=W(g,"avatar",8),y=W(g,"onClick",8);K();var c=je(),d=w(c),u=w(d,!0);b(d);var _=E(d,2),r=w(_,!0);b(_);var s=E(_,2);{var t=f=>{var S=$e(),P=w(S,!0);b(S),R(()=>G(P,(C(e()),x(()=>e().gender)))),v(f,S)};M(s,f=>{C(e()),x(()=>e().gender)&&f(t)})}var A=E(s,2);{var Q=f=>{var S=Le();oe(S,5,()=>(C(e()),x(()=>e().categories)),ne,(P,q)=>{var U=Ne(),D=w(U,!0);b(U),R(()=>G(D,n(q))),v(P,U)}),b(S),v(f,S)};M(A,f=>{C(e()),x(()=>e().categories&&e().categories.length>0)&&f(Q)})}b(c),R(()=>{G(u,(C(e()),x(()=>e().name??"Unnamed Avatar"))),G(r,(C(e()),x(()=>e().description??"No description available.")))}),ee("click",c,()=>y()(e())),ee("keydown",c,f=>f.key==="Enter"&&y()(e())),v($,c),J()}var Be=h('<div class="loading svelte-61krc7">Loading avatars...</div>'),Ee=h('<div class="error svelte-61krc7"> </div>'),Pe=h('<div class="no-results svelte-61krc7">No avatars found.</div>'),Ue=h('<div class="container svelte-61krc7"><!></div>'),De=h("<!> <!> <!>",1);function Ie($,g){H(g,!1);let e=N([]),y=[],c=N(!0),d=N(null),u=N(null),_=N(!1),r=N(!1),s=N([]),t="";async function A(a="",F=0,p=20){try{o(c,!0),o(d,null);const m=new URLSearchParams;a&&m.append("search",a),F&&m.append("offset",F.toString()),p&&m.append("limit",p.toString()),console.log("Fetching avatars with params:",m.toString());const i=await Fe(`/avatars?${m}`);console.log("Received avatars data:",i),console.log("Type of data:",typeof i),console.log("Data structure:",Array.isArray(i)?"Array":"Object",i);const k=Array.isArray(i)?i:i.avatars||i.items||i.data||[];return console.log("Processed avatars array:",k),console.log("Number of avatars:",k.length),k}catch(m){return console.error("Error fetching avatars:",m),console.warn("Using mock data for development"),[{id:"1",name:"Athletic Male Avatar",description:"A versatile male avatar suitable for various workout demonstrations",gender:"Male",categories:["Athletic","Male","Standard"],fileName:"athletic_male.fbx",screenshot:"/api/placeholder/400/300",createdAt:"2024-01-15T10:00:00Z",createdBy:"admin"},{id:"2",name:"Athletic Female Avatar",description:"A versatile female avatar suitable for various workout demonstrations",gender:"Female",categories:["Athletic","Female","Standard"],fileName:"athletic_female.fbx",screenshot:"/api/placeholder/400/300",createdAt:"2024-01-16T10:00:00Z",createdBy:"admin"},{id:"3",name:"Beginner Male Avatar",description:"A male avatar designed for beginner-level workouts",gender:"Male",categories:["Beginner","Male"],fileName:"beginner_male.fbx",screenshot:"/api/placeholder/400/300",createdAt:"2024-01-17T10:00:00Z",createdBy:"trainer1"}].filter(i=>!a||i.name?.toLowerCase().includes(a.toLowerCase())||i.description?.toLowerCase().includes(a.toLowerCase())||i.categories?.some(k=>k.toLowerCase().includes(a.toLowerCase())))}finally{o(c,!1)}}function Q(a,F,p){const m=F.toLowerCase(),i=p.filter(l=>l.startsWith("category:")).map(l=>l.replace("category:","")),k=p.filter(l=>l.startsWith("gender:")).map(l=>l.replace("gender:",""));return a.filter(l=>{const L=!F||(l.name?.toLowerCase().includes(m)??!1)||(l.description?.toLowerCase().includes(m)??!1),z=i.length===0||i.every(V=>l.categories?.includes(V)??!1),I=k.length===0||k.includes(l.gender??"");return L&&z&&I})}async function f(){o(c,!0),o(d,null);try{y.length===0&&(y=await A()),o(e,Q(y,t,n(s)))}catch(a){o(d,a.message)}finally{o(c,!1)}}async function S(a){t=a,await f()}function P(a){o(u,a),o(_,!0)}function q(){o(_,!1),o(u,null)}function U(){o(r,!0)}function D(){o(r,!1)}function ae(a){o(s,a),D(),f()}function de(a){a.key==="Escape"&&(q(),D())}_e(async()=>{await f()}),K();var te=De();ee("keydown",be,de);var re=Z(te);ke(re,{title:"Avatars",description:"Browse through all available avatars.",onSearch:S,onFilterClick:U,get selectedFilters(){return n(s)},set selectedFilters(a){o(s,a)},$$events:{filterChanged:a=>{o(s,a.detail),ae(a.detail)}},children:(a,F)=>{var p=Ue(),m=w(p);{var i=l=>{var L=Be();v(l,L)},k=l=>{var L=Y(),z=Z(L);{var I=j=>{var T=Ee(),X=w(T);b(T),R(()=>G(X,`Error: ${n(d)??""}`)),v(j,T)},V=j=>{var T=Y(),X=Z(T);{var me=B=>{var O=Pe();v(B,O)},ge=B=>{var O=Y(),pe=Z(O);oe(pe,1,()=>n(e),ne,(he,ye)=>{Te(he,{get avatar(){return n(ye)},onClick:P})}),v(B,O)};M(X,B=>{n(e).length===0?B(me):B(ge,!1)},!0)}v(j,T)};M(z,j=>{n(d)?j(I):j(V,!1)},!0)}v(l,L)};M(m,l=>{n(c)?l(i):l(k,!1)})}b(p),v(a,p)},$$slots:{default:!0},$$legacy:!0});var se=E(re,2);{var ve=a=>{{let F=Ae(()=>n(u).name??"Unknown");le(a,{get title(){return n(F)},$$events:{close:q},children:(p,m)=>{Ce(p,{get avatar(){return n(u)}})},$$slots:{default:!0}})}};M(se,a=>{n(_)&&n(u)&&a(ve)})}var ue=E(se,2);{var fe=a=>{le(a,{title:"Filter Avatars",$$events:{close:D},children:(F,p)=>{Me(F,{get selectedFilters(){return n(s)},onFilter:ae})},$$slots:{default:!0}})};M(ue,a=>{n(r)&&a(fe)})}v($,te),J()}export{Ie as component};
